"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const commonHelper_1 = require("../../utils/commonHelper");
Page({
    data: {},
    onReady: function () {
        const currDate = commonHelper_1.toFormatString(new Date());
        const newBook = {
            bookName: '',
            bookid: '',
            initDate: currDate,
            initAmount: 0,
            currency: 'CNY',
            currAmount: 0,
            desc: '',
        };
        this.setData(Object.assign({}, newBook));
    },
    onDateChange: function (event) {
        const { detail: { value } } = event;
        this.setData({
            initDate: value,
        });
    },
    onNameChange: function (event) {
        const { detail: { value } } = event;
        this.setData({
            bookName: value,
        });
    },
    onAmountChange: function (event) {
        const { detail: { value } } = event;
        this.setData({
            initAmount: parseFloat(value),
        });
    },
    onDesChange: function (event) {
        const { detail: { text } } = event;
        this.setData({
            desc: text,
        });
    },
    onAddBook: function () {
        const { bookName, initAmount, initDate, currency } = this.data;
        wx.cloud.callFunction({
            name: "addBook",
            data: {
                bookName,
                initAmount,
                initDate,
                currency,
            },
        }).then(res => {
            console.log('调用success', res);
            wx.navigateBack({
                delta: 0,
            });
        }).catch((err) => console.log(err));
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRkQm9vay5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImFkZEJvb2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSwyREFBeUQ7QUFNekQsSUFBSSxDQUFDO0lBS0gsSUFBSSxFQUFFLEVBQ0w7SUFLRCxPQUFPLEVBQUU7UUFDUCxNQUFNLFFBQVEsR0FBRyw2QkFBYyxDQUFDLElBQUksSUFBSSxFQUFFLENBQUMsQ0FBQTtRQUMzQyxNQUFNLE9BQU8sR0FBUztZQUNwQixRQUFRLEVBQUUsRUFBRTtZQUNaLE1BQU0sRUFBRSxFQUFFO1lBQ1YsUUFBUSxFQUFFLFFBQVE7WUFDbEIsVUFBVSxFQUFFLENBQUM7WUFDYixRQUFRLEVBQUUsS0FBSztZQUNmLFVBQVUsRUFBRSxDQUFDO1lBQ2IsSUFBSSxFQUFDLEVBQUU7U0FDUixDQUFBO1FBQ0QsSUFBSSxDQUFDLE9BQU8sbUJBQ1AsT0FBTyxFQUNWLENBQUE7SUFDSixDQUFDO0lBU0QsWUFBWSxFQUFFLFVBQVUsS0FBVTtRQUNoQyxNQUFNLEVBQUUsTUFBTSxFQUFFLEVBQUUsS0FBSyxFQUFFLEVBQUUsR0FBRyxLQUFLLENBQUE7UUFDbkMsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLFFBQVEsRUFBRSxLQUFLO1NBQ2hCLENBQUMsQ0FBQTtJQUNKLENBQUM7SUFFRCxZQUFZLEVBQUUsVUFBVSxLQUFVO1FBQ2hDLE1BQU0sRUFBRSxNQUFNLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxHQUFHLEtBQUssQ0FBQTtRQUNuQyxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsUUFBUSxFQUFFLEtBQUs7U0FDaEIsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUVELGNBQWMsRUFBRSxVQUFVLEtBQVU7UUFDbEMsTUFBTSxFQUFFLE1BQU0sRUFBRSxFQUFFLEtBQUssRUFBRSxFQUFFLEdBQUcsS0FBSyxDQUFBO1FBQ25DLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDWCxVQUFVLEVBQUUsVUFBVSxDQUFDLEtBQUssQ0FBQztTQUM5QixDQUFDLENBQUE7SUFDSixDQUFDO0lBRUQsV0FBVyxFQUFFLFVBQVUsS0FBVTtRQUMvQixNQUFNLEVBQUUsTUFBTSxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsR0FBRyxLQUFLLENBQUE7UUFDbEMsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNYLElBQUksRUFBRSxJQUFJO1NBQ1gsQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUVELFNBQVMsRUFBRTtRQUNULE1BQU0sRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsR0FBRyxJQUFJLENBQUMsSUFBZ0IsQ0FBQztRQUMzRSxFQUFFLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQztZQUNwQixJQUFJLEVBQUUsU0FBUztZQUNmLElBQUksRUFBRTtnQkFDSixRQUFRO2dCQUNSLFVBQVU7Z0JBQ1YsUUFBUTtnQkFDUixRQUFRO2FBQ1Q7U0FDRixDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1lBQ1osT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsR0FBRyxDQUFDLENBQUE7WUFDN0IsRUFBRSxDQUFDLFlBQVksQ0FBQztnQkFDZCxLQUFLLEVBQUUsQ0FBQzthQUNULENBQUMsQ0FBQTtRQUNKLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBO0lBQ3JDLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0b0Zvcm1hdFN0cmluZyB9IGZyb20gJy4uLy4uL3V0aWxzL2NvbW1vbkhlbHBlcidcclxuaW1wb3J0IHsgYm9vayB9IGZyb20gJy4uLy4uL2RhdGFNb2RlbC9kYXRhJ1xyXG5cclxuaW50ZXJmYWNlIHBhZ2VEYXRhIGV4dGVuZHMgYm9vayB7XHJcbn1cclxuXHJcblBhZ2Uoe1xyXG5cclxuICAvKipcclxuICAgKiDpobXpnaLnmoTliJ3lp4vmlbDmja5cclxuICAgKi9cclxuICBkYXRhOiB7XHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICog55Sf5ZG95ZGo5pyf5Ye95pWwLS3nm5HlkKzpobXpnaLliJ3mrKHmuLLmn5PlrozmiJBcclxuICAgKi9cclxuICBvblJlYWR5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBjdXJyRGF0ZSA9IHRvRm9ybWF0U3RyaW5nKG5ldyBEYXRlKCkpXHJcbiAgICBjb25zdCBuZXdCb29rOiBib29rID0ge1xyXG4gICAgICBib29rTmFtZTogJycsXHJcbiAgICAgIGJvb2tpZDogJycsXHJcbiAgICAgIGluaXREYXRlOiBjdXJyRGF0ZSxcclxuICAgICAgaW5pdEFtb3VudDogMCxcclxuICAgICAgY3VycmVuY3k6ICdDTlknLFxyXG4gICAgICBjdXJyQW1vdW50OiAwLFxyXG4gICAgICBkZXNjOicnLFxyXG4gICAgfVxyXG4gICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgLi4ubmV3Qm9va1xyXG4gICAgfSlcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiDnlKjmiLfngrnlh7vlj7PkuIrop5LliIbkuqtcclxuICAgKi9cclxuICAvLyBvblNoYXJlQXBwTWVzc2FnZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAvLyB9LFxyXG5cclxuICBvbkRhdGVDaGFuZ2U6IGZ1bmN0aW9uIChldmVudDogYW55KSB7XHJcbiAgICBjb25zdCB7IGRldGFpbDogeyB2YWx1ZSB9IH0gPSBldmVudFxyXG4gICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgaW5pdERhdGU6IHZhbHVlLFxyXG4gICAgfSlcclxuICB9LFxyXG5cclxuICBvbk5hbWVDaGFuZ2U6IGZ1bmN0aW9uIChldmVudDogYW55KSB7XHJcbiAgICBjb25zdCB7IGRldGFpbDogeyB2YWx1ZSB9IH0gPSBldmVudFxyXG4gICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgYm9va05hbWU6IHZhbHVlLFxyXG4gICAgfSlcclxuICB9LFxyXG5cclxuICBvbkFtb3VudENoYW5nZTogZnVuY3Rpb24gKGV2ZW50OiBhbnkpIHtcclxuICAgIGNvbnN0IHsgZGV0YWlsOiB7IHZhbHVlIH0gfSA9IGV2ZW50XHJcbiAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICBpbml0QW1vdW50OiBwYXJzZUZsb2F0KHZhbHVlKSxcclxuICAgIH0pXHJcbiAgfSxcclxuXHJcbiAgb25EZXNDaGFuZ2U6IGZ1bmN0aW9uIChldmVudDogYW55KSB7XHJcbiAgICBjb25zdCB7IGRldGFpbDogeyB0ZXh0IH0gfSA9IGV2ZW50XHJcbiAgICB0aGlzLnNldERhdGEoe1xyXG4gICAgICBkZXNjOiB0ZXh0LFxyXG4gICAgfSlcclxuICB9LFxyXG5cclxuICBvbkFkZEJvb2s6IGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHsgYm9va05hbWUsIGluaXRBbW91bnQsIGluaXREYXRlLCBjdXJyZW5jeSB9ID0gdGhpcy5kYXRhIGFzIHBhZ2VEYXRhO1xyXG4gICAgd3guY2xvdWQuY2FsbEZ1bmN0aW9uKHtcclxuICAgICAgbmFtZTogXCJhZGRCb29rXCIsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBib29rTmFtZSxcclxuICAgICAgICBpbml0QW1vdW50LFxyXG4gICAgICAgIGluaXREYXRlLFxyXG4gICAgICAgIGN1cnJlbmN5LFxyXG4gICAgICB9LFxyXG4gICAgfSkudGhlbihyZXMgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZygn6LCD55Soc3VjY2VzcycsIHJlcylcclxuICAgICAgd3gubmF2aWdhdGVCYWNrKHtcclxuICAgICAgICBkZWx0YTogMCxcclxuICAgICAgfSlcclxuICAgIH0pLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXHJcbiAgfVxyXG59KSJdfQ==